<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.buskers.repository.mapper.MemberMapper">
	
	<!-- 일반 회원 가입 -->
	<insert id="signupMember" parameterType="member">
		insert into tb_member (
			id, pass, email, sex, nick_name
		) values (
			#{id}, #{pass}, #{email}, #{sex}, #{nickName}
		);
	</insert>
	<!-- 카카오 회원가입 -->
	<insert id="signupKakaoMember" parameterType="member">
		insert into tb_member (
			id,nick_name,member_type
		) values (
			#{id}, #{nickName},'k'
		);
	</insert>
	
	<!-- 로그인 -->
	<select id="loginAction" resultType="member">
		select *
		  from tb_member
		 where id = #{id}
	</select>
	
	<!-- 아이디 중복체크 -->
	<select id="checkId" parameterType="member" resultType="int">
		select count(*)
		  from tb_member
		 where id = #{id}
	</select>
	
	<!-- 이메일 중복체크 -->
	<select id="checkEmail" parameterType="member" resultType="int">
		select count(*)
		  from tb_member
		 where email = #{email}
	</select>
	
	<!-- 닉네임 중복체크 -->
	<select id="checkNickName" parameterType="member" resultType="int">
		select count(*)
		  from tb_member
		 where nick_name = #{nickName}
	</select>
	
	
	<!-- 아이디 찾기 -->
	<select id="findId"  resultType="member">
		select id
		  from tb_member
		 where email = #{email}
	</select>
	
	<!-- 비밀번호 찾기 -->
	<select id="findPass" resultType="member">
		select pass
		  from tb_member
		 where id = #{id} 
		   and email = #{email}
	</select>
	
	<!-- 비밀번호 변경 -->
	<update id="newPass" parameterType="member">
		update tb_member
		   set pass = #{pass}
		 where id = #{id}
		   and email = #{email}
	</update>
	
	
</mapper>